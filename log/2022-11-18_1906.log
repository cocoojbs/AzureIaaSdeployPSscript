**********************
Windows PowerShell トランスクリプト開始
開始時刻: 20221118190644
ユーザー名: JBS\kitamurat
RunAs ユーザー: JBS\kitamurat
構成名: 
コンピューター: W1051663N211 (Microsoft Windows NT 10.0.19042.0)
ホスト アプリケーション: C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe
プロセス ID: 15096
PSVersion: 5.1.19041.1682
PSEdition: Desktop
PSCompatibleVersions: 1.0, 2.0, 3.0, 4.0, 5.0, 5.1.19041.1682
BuildVersion: 10.0.19041.1682
CLRVersion: 4.0.30319.42000
WSManStackVersion: 3.0
PSRemotingProtocolVersion: 2.3
SerializationVersion: 1.1.0.1
**********************
トランスクリプトが開始されました。出力ファイル: .\log\2022-11-18_1906.log
 Subscription:
CP-CP2Dept (b0da899c-406c-4ebc-b7d5-0f9286d42d1e) - cc7dee35-16af-4e40-a4d4-2619d7c0024f - kitamurat@jbs.com
|
|
|
| - - - - - - - - - - - - - -
|  VirtualNetwork
| - - - - - - - - - - - - - -
.\csv\nw_parameter.csv

vNet_name vNet_resourceGroup location  range          subnetNames       subnetRanges                     NSG_names   NSG_resourceGroups
--------- ------------------ --------  -----          -----------       ------------                     ---------   ------------------
vnetweb01 rg0102             japaneast 192.168.0.0/24 subnet01          192.168.0.0/26                   nsg01       rg0102
vnetweb01 rg0102             japaneast 192.168.0.0/24 subnet01          192.168.0.0/26                   nsg01       rg0102
vnetweb01 rg0102             japaneast 192.168.0.0/24 subnet02;subnet03 192.168.0.64/26;192.168.0.128/25 nsg02;nsg03 rg0102;rg0102


|
情報: Loaded Module 'Az.MSGraph'
| RESOURCEGROUP [ rg0102 ] deploying...
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| -- Azure_Virtual_Network [ vnetweb01 ] --
|
| VNET [ vnetweb01 ] deploying...
| VNET_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/virtualNetworks/vnetweb01
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| -- Azure_Network_Security_Group [ nsg01 ] --
|
| NSG [ nsg01] ] deploying...
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| NSG_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/networkSecurityGroups/nsg01
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| -- Azure_Network_Security_Group [ nsg02 ] --
|
| NSG [ nsg02] ] deploying...
| function add_NSG completed.
|
| -- Azure_Virtual_Network_Subnet [ subnet01 ] --
|
| SUBNET [ subnet01 ] deploying...
警告: Upcoming breaking changes in the cmdlet 'Add-AzVirtualNetworkSubnetConfig' :
Update Property Name
Cmdlet invocation changes :
    Old Way : -ResourceId
    New Way : -NatGatewayId
Update Property Name
Cmdlet invocation changes :
    Old Way : -InputObject
    New Way : -NatGateway
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
| SUBNET ResourceID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/virtualNetworks/vnetweb01/subnets/subnet01
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| VNET_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/virtualNetworks/vnetweb01
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| NSG_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/networkSecurityGroups/nsg01
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| NSG_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/networkSecurityGroups/nsg01
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| NSG_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/networkSecurityGroups/nsg02
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| -- Azure_Network_Security_Group [ nsg03 ] --
|
| NSG [ nsg03] ] deploying...
| function add_NSG completed.
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| VNET_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/virtualNetworks/vnetweb01
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| NSG_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/networkSecurityGroups/nsg01
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| NSG_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/networkSecurityGroups/nsg01
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| NSG_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/networkSecurityGroups/nsg02
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| NSG_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/networkSecurityGroups/nsg03
|
| function add_NSG completed.
|
| -- Azure_Virtual_Network_Subnet [ subnet02 ] --
|
| SUBNET [ subnet02 ] deploying...
警告: Upcoming breaking changes in the cmdlet 'Add-AzVirtualNetworkSubnetConfig' :
Update Property Name
Cmdlet invocation changes :
    Old Way : -ResourceId
    New Way : -NatGatewayId
Update Property Name
Cmdlet invocation changes :
    Old Way : -InputObject
    New Way : -NatGateway
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
| SUBNET ResourceID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/virtualNetworks/vnetweb01/subnets/subnet02
|
| -- Azure_Virtual_Network_Subnet [ subnet03 ] --
|
| SUBNET [ subnet03 ] deploying...
警告: Upcoming breaking changes in the cmdlet 'Add-AzVirtualNetworkSubnetConfig' :
Update Property Name
Cmdlet invocation changes :
    Old Way : -ResourceId
    New Way : -NatGatewayId
Update Property Name
Cmdlet invocation changes :
    Old Way : -InputObject
    New Way : -NatGateway
Note : Go to https://aka.ms/azps-changewarnings for steps to suppress this breaking change warning, and other information on breaking changes in Azure PowerShell.
| SUBNET ResourceID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/virtualNetworks/vnetweb01/subnets/subnet03
|
| function add_VirtualNetwork completed.
|
|
|
| - - - - - - - - - - - - - -
|  AvailabilitySet
| - - - - - - - - - - - - - -
.\csv\availability_parameter.csv

AvailabilitySet vm_resourceGroup Location  UpdateDomain FaultDomain ProximityPlacementGroup
--------------- ---------------- --------  ------------ ----------- -----------------------
asweb           rg0102           japaneast 5            2           ppgweb


|
| -- Proximity_Placement_Group [ ppgweb ] --
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
情報: Loaded Module 'Az.Compute'
| ProximityPlacementGroup [ ppgweb ] deploying...
| ProximityPlacementGroup ResourceID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Compute/proximityPlacementGroups/ppgweb
|
| -- Availability_Set [ asweb ] --
|
| AvailabilitySet [ asweb ] deploying...
| AvailabilitySet ResourceID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Compute/availabilitySets/asweb
|
| function add_AvailabilitySet completed.
|
|
|
| - - - - - - - - - - - - - -
|  NetworkSecurityRule
| - - - - - - - - - - - - - -
.\csv\nsg_parameter.csv

nsgName nsgResourceGroup ruleName       access protocol direction priority sourceAddresses sourcePorts destAddresses
------- ---------------- --------       ------ -------- --------- -------- --------------- ----------- -------------
nsg01   rg0102           Allow80and443  allow  TCP      inbound   1000     10.0.0.0/16     *           192.168.0.0/26
nsg02   rg0102           Allow1433      allow  TCP      inbound   1000     192.168.0.0/26  *           192.168.0.64/26
nsg03   rg0102           DenyAllInbound deny   *        inbound   4096     *               *           *


|
| -- Azure_Network_Security_Group [ nsg01 ] --
|
| Rule [ Allow80and443 ]:

|
| -- Azure_Network_Security_Group [ nsg02 ] --
|
| Rule [ Allow1433 ]:

Name                     : Allow80and443
Direction                : Inbound
Access                   : Allow
Priority                 : 1000
Protocol                 : TCP
DestinationPortRange     : {80, 443}
SourceAddressPrefix      : {10.0.0.0/16}
DestinationAddressPrefix : {192.168.0.0/26}

Name                     : Allow1433
Direction                : Inbound
Access                   : Allow
Priority                 : 1000
Protocol                 : TCP
DestinationPortRange     : {1433}
SourceAddressPrefix      : {192.168.0.0/26}
DestinationAddressPrefix : {192.168.0.64/26}

|
| -- Azure_Network_Security_Group [ nsg03 ] --
|
| Rule [ DenyAllInbound ]:
Name                     : DenyAllInbound
Direction                : Inbound
Access                   : Deny
Priority                 : 4096
Protocol                 : *
DestinationPortRange     : {*}
SourceAddressPrefix      : {*}
DestinationAddressPrefix : {*}

|
| function add_NetworkSecurityRule completed.
|
|
|
| - - - - - - - - - - - - - -
|  VM_NIC
| - - - - - - - - - - - - - -
.\csv\nw_parameter.csv



vm_name vNet_name subnetNames       subnetRanges                     ipAddress
------- --------- -----------       ------------                     ---------
vmweb01 vnetweb01 subnet01          192.168.0.0/26                   192.168.0.11
vmweb02 vnetweb01 subnet01          192.168.0.0/26                   192.168.0.12
vmdb01  vnetweb01 subnet02;subnet03 192.168.0.64/26;192.168.0.128/25 192.168.0.101


|
| -- Azure_Virtual_Machines [ vmweb01 ] --
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| NIC [ vmweb01-NIC1 ] deploying...
| NIC ResourceID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/networkInterfaces/vmweb01-NIC1
|
| -- Azure_Virtual_Machines [ vmweb02 ] --
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| NIC [ vmweb02-NIC1 ] deploying...
| NIC ResourceID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/networkInterfaces/vmweb02-NIC1
|
| -- Azure_Virtual_Machines [ vmdb01 ] --
|
| RESOURCEGROUP_ID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102
|
| NIC [ vmdb01-NIC1 ] deploying...
| NIC ResourceID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Network/networkInterfaces/vmdb01-NIC1
|
| function add_NetworkInterface completed.
|
|
|
| - - - - - - - - - - - - - -
|  VM
| - - - - - - - - - - - - - -
.\csv\vm_parameter.csv

vm_name vm_resourceGroup vm_size         vmOsDisk_type vmOsDisk_size vmDataDisks_type vmDataDisks_size ImageName
------- ---------------- -------         ------------- ------------- ---------------- ---------------- ---------
vmweb01 rg0102           Standard_F2s_v2 Standard_LRS  32
vmweb02 rg0102           Standard_F2s_v2 Standard_LRS  32
vmdb01  rg0102           Standard_F2s_v2 Standard_LRS  32            StandardSSD_LRS  64               win2016-image


|
| -- Azure_Virtual_Machines [ vmweb01 ] --
|
| VM [ vmweb01 ]'s OS Version infomation as follows.
Windows
MicrosoftWindowsServer
WindowsServer2019-datacenter-smalldisk-g2
|
| VM [ vmweb01 ] deploying...
| VM ResourceID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg0102/providers/Microsoft.Compute/virtualMachines/vmweb01
|
| -- Azure_Virtual_Machines [ vmweb02 ] --
|
 - - - - -
##,OSTYPE, PUBLISHER, OFFER, SKU
1 ,Windows,MicrosoftWindowsServer,WindowsServer,2012
2 ,Windows,MicrosoftWindowsServer,WindowsServer,2016
3 ,Windows,MicrosoftWindowsServer,WindowsServer,2019
4 ,Windows,MicrosoftWindowsServer,WindowsServer,2022
5 ,Windows,MicrosoftWindowsDesktop,Windows-10,win10
6 ,Windows,MicrosoftWindowsDesktop,Windows-11,win11
7 ,Linux,RedHat,RHEL,7
8 ,Linux,RedHat,RHEL,8
9 ,Linux,OpenLogic,CentOS,7
10,Linux,OpenLogic,CentOS,8
11,Linux,Canonical,UbuntuServer,16
12,Linux,Canonical,UbuntuServer,18
13,Linux,Canonical,0001-com-ubuntu-server-focal,20
14,Linux,Debian,Debian-10,10
15,Linux,Debian,Debian-11,11
 - - - - -
| -- Error -- Invalid OS version.
|
| function add_VM completed.
|
|
|
| - - - - - - - - - - - - - -
|  StorageAccount
| - - - - - - - - - - - - - -
.\csv\storage_parameter.csv

storageName     storageResourceGroup location  sku          bootdiag_vmNames vmResourceGroups flowlog_nsgs nsgResourceGroups RetentionInDays
-----------     -------------------- --------  ---          ---------------- ---------------- ------------ ----------------- ---------------
vmweb0102bootst rg0102               japaneast Standard_LRS vmweb01;vmweb02  rg01;rg01
vmweb0102flowst rg0102               japaneast Standard_LRS                                   nsg01        rg0102            90


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  VM_Backup
| - - - - - - - - - - - - - -
.\csv\backup_parameter.csv

vmName  vmRg   RecoveryServicesName RecoveryServicesRg policyName   scheduleRunFrequency scheduleRunTimes instantRpRetentionRangeInDays count weeklySchedule
------  ----   -------------------- ------------------ ----------   -------------------- ---------------- ----------------------------- ----- --------------
vmweb01 rg0102 rsc01                rg0102             WeeklyPolicy Weekly               3:00             5                             1     Sunday
vmdb01  rg0102 rsc01                rg0102             DailyPolicy  Daily                2:00             2                             7


|
| Canceled.
|
|
|
| COMPLETE.
|
**********************
Windows PowerShell トランスクリプト終了
終了時刻: 20221118191258
**********************
