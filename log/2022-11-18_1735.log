**********************
Windows PowerShell トランスクリプト開始
開始時刻: 20221118173506
ユーザー名: JBS\kitamurat
RunAs ユーザー: JBS\kitamurat
構成名: 
コンピューター: W1051663N211 (Microsoft Windows NT 10.0.19042.0)
ホスト アプリケーション: powershell
プロセス ID: 11844
PSVersion: 5.1.19041.1682
PSEdition: Desktop
PSCompatibleVersions: 1.0, 2.0, 3.0, 4.0, 5.0, 5.1.19041.1682
BuildVersion: 10.0.19041.1682
CLRVersion: 4.0.30319.42000
WSManStackVersion: 3.0
PSRemotingProtocolVersion: 2.3
SerializationVersion: 1.1.0.1
**********************
トランスクリプトが開始されました。出力ファイル: .\log\2022-11-18_1735.log
 Subscription:
CP-CP2Dept (b0da899c-406c-4ebc-b7d5-0f9286d42d1e) - cc7dee35-16af-4e40-a4d4-2619d7c0024f - kitamurat@jbs.com
|
|
|
| - - - - - - - - - - - - - -
|  VirtualNetwork
| - - - - - - - - - - - - - -
.\csv\nw_parameter.csv

vNet_name vNet_resourceGroup location  range          subnetNames       subnetRanges                     NSG_names   NSG_resourceGroups
--------- ------------------ --------  -----          -----------       ------------                     ---------   ------------------
vnetweb01 rg01               japaneast 192.168.0.0/24 subnet01          192.168.0.0/26                   nsg01       rg01
vnetweb01 rg01               japaneast 192.168.0.0/24 subnet01          192.168.0.0/26                   nsg01       rg01
vnetweb01 rg01               japaneast 192.168.0.0/24 subnet02;subnet03 192.168.0.64/26;192.168.0.128/25 nsg02;nsg03 rg01;rg01


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  AvailabilitySet
| - - - - - - - - - - - - - -
.\csv\availability_parameter.csv

AvailabilitySet vm_resourceGroup Location  UpdateDomain FaultDomain ProximityPlacementGroup
--------------- ---------------- --------  ------------ ----------- -----------------------
asweb           rg01             japaneast 5            2           ppgweb


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  NetworkSecurityRule
| - - - - - - - - - - - - - -
.\csv\nsg_parameter.csv

nsgName nsgResourceGroup ruleName       access protocol direction priority sourceAddresses sourcePorts destAddresses
------- ---------------- --------       ------ -------- --------- -------- --------------- ----------- -------------
nsg01   rg01             Allow80and443  allow  TCP      inbound   1000     10.0.0.0/16     *           192.168.0.0/26
nsg02   rg01             Allow1433      allow  TCP      inbound   1000     192.168.0.0/26  *           192.168.0.64/26
nsg03   rg01             DenyAllInbound deny   *        inbound   4096     *               *           *


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  VM_NIC
| - - - - - - - - - - - - - -
.\csv\nw_parameter.csv

vm_name vNet_name subnetNames       subnetRanges                     ipAddress
------- --------- -----------       ------------                     ---------
vmweb01 vnetweb01 subnet01          192.168.0.0/26                   192.168.0.11
vmweb02 vnetweb01 subnet01          192.168.0.0/26                   192.168.0.12
vmdb01  vnetweb01 subnet02;subnet03 192.168.0.64/26;192.168.0.128/25 192.168.0.101


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  VM
| - - - - - - - - - - - - - -
.\csv\vm_parameter.csv

vm_name vm_resourceGroup vm_size         vmOsDisk_type vmOsDisk_size vmDataDisks_type vmDataDisks_size ImageName
------- ---------------- -------         ------------- ------------- ---------------- ---------------- ---------
vmweb01 rg01             Standard_F2s_v2 Standard_LRS  32
vmweb02 rg01             Standard_F2s_v2 Standard_LRS  32
vmdb01  rg01             Standard_F2s_v2 Standard_LRS  32            StandardSSD_LRS  64               win2016-image


|
| -- Azure_Virtual_Machines [ vmweb01 ] --
|
| VM ResourceID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg01/providers/Microsoft.Compute/virtualMachines/vmweb01
| -- Azure_Virtual_Machines [ vmweb02 ] --
|
| VM [ vmweb02 ]'s OS Version infomation as follows.
Windows
MicrosoftWindowsServer
WindowsServer2019-datacenter-core-smalldisk-g2
|
| VM [ vmweb02 ] deploying...
| VM ResourceID:
/subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/rg01/providers/Microsoft.Compute/virtualMachines/vmweb02
|
| -- Azure_Virtual_Machines [ vmdb01 ] --
|
Get-AzImage : The Resource 'Microsoft.Compute/images/win2016-image' under resource group 'rg01' was not found. For more 
details please go to https://aka.ms/ARMResourceNotFoundFix
ErrorCode: ResourceNotFound
ErrorMessage: The Resource 'Microsoft.Compute/images/win2016-image' under resource group 'rg01' was not found. For more 
details please go to https://aka.ms/ARMResourceNotFoundFix
ErrorTarget: 
StatusCode: 404
ReasonPhrase: Not Found
OperationID : 45e2a42c-77d0-427e-850a-7b6a534c3b07
発生場所 C:\Users\kitamurat\pshome\AzureIaaSdeployPSscript\func\add_VM.ps1:122 文字:26
+ ...    $image = Get-AzImage -ImageName $imageName -ResourceGroup $imageRe ...
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : CloseError: (:) [Get-AzImage]、ComputeCloudException
    + FullyQualifiedErrorId : Microsoft.Azure.Commands.Compute.Automation.GetAzureRmImage
Get-AzImage : The Resource 'Microsoft.Compute/images/win2016-image' under resource group 'rg01' was not found. For more details please go to https://aka.ms/ARMResourceNotFoundFix
ErrorCode: ResourceNotFound
ErrorMessage: The Resource 'Microsoft.Compute/images/win2016-image' under resource group 'rg01' was not found. For more details please go to https://aka.ms/ARMResourceNotFoundFix
ErrorTarget:
StatusCode: 404
ReasonPhrase: Not Found
OperationID : 45e2a42c-77d0-427e-850a-7b6a534c3b07
発生場所 C:\Users\kitamurat\pshome\AzureIaaSdeployPSscript\func\add_VM.ps1:122 文字:26
+ ...    $image = Get-AzImage -ImageName $imageName -ResourceGroup $imageRe ...
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : CloseError: (:) [Get-AzImage]、ComputeCloudException
    + FullyQualifiedErrorId : Microsoft.Azure.Commands.Compute.Automation.GetAzureRmImage

[ERROR] IMAGE [ win2016-image ] not found in [ rg01 ].
| function add_VM completed.
|
|
|
| - - - - - - - - - - - - - -
|  StorageAccount
| - - - - - - - - - - - - - -
.\csv\storage_parameter.csv

storageName     storageResourceGroup location  sku          bootdiag_vmNames vmResourceGroups flowlog_nsgs nsgResourceGroups RetentionInDays
-----------     -------------------- --------  ---          ---------------- ---------------- ------------ ----------------- ---------------
vmweb0102bootst rg01                 japaneast Standard_LRS vmweb01;vmweb02  rg01;rg01
vmweb0102flowst rg01                 japaneast Standard_LRS                                   nsg01        rg01              90


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  VM_Backup
| - - - - - - - - - - - - - -
.\csv\backup_parameter.csv

vmName  vmRg RecoveryServicesName RecoveryServicesRg policyName   scheduleRunFrequency scheduleRunTimes instantRpRetentionRangeInDays count weeklySchedule
------  ---- -------------------- ------------------ ----------   -------------------- ---------------- ----------------------------- ----- --------------
vmweb01 rg01 rsc01                rg01               WeeklyPolicy Weekly               3:00             5                             1     Sunday
vmdb01  rg01 rsc01                rg01               DailyPolicy  Daily                2:00             2                             7


|
| Canceled.
|
|
|
| COMPLETE.
|
**********************
Windows PowerShell トランスクリプト終了
終了時刻: 20221118173801
**********************
