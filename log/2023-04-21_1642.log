**********************
Windows PowerShell トランスクリプト開始
開始時刻: 20230421164245
ユーザー名: JBS\kitamurat
RunAs ユーザー: JBS\kitamurat
構成名: 
コンピューター: W1051663N211 (Microsoft Windows NT 10.0.19045.0)
ホスト アプリケーション: C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe
プロセス ID: 3088
PSVersion: 5.1.19041.2673
PSEdition: Desktop
PSCompatibleVersions: 1.0, 2.0, 3.0, 4.0, 5.0, 5.1.19041.2673
BuildVersion: 10.0.19041.2673
CLRVersion: 4.0.30319.42000
WSManStackVersion: 3.0
PSRemotingProtocolVersion: 2.3
SerializationVersion: 1.1.0.1
**********************
トランスクリプトが開始されました。出力ファイル: .\log\2023-04-21_1642.log
|
| - - - - - - - - - - - - - -
|
 Subscription:
HC-HC1Dept (b0da899c-406c-4ebc-b7d5-0f9286d42d1e) - cc7dee35-16af-4e40-a4d4-2619d7c0024f - kitamurat@jbs.com
|
|
|
| - - - - - - - - - - - - - -
| Check for the existence of Az modules.
| - - - - - - - - - - - - - -
Az.Accounts
Az.Resources
Az.Network
Az.Compute
Az.Storage
Az.RecoveryServices
|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  VirtualNetwork
| - - - - - - - - - - - - - -
.\csv\nw_parameter.csv

vNet_name      vNet_resourceGroup location  ranges
---------      ------------------ --------  ------
sample-vnet192 sample-rg          japaneast 192.168.0.0/24;192.168.255.0/24
sample-vnet192 sample-rg          japaneast 192.168.0.0/24;192.168.255.0/24
sample-vnet172 sample-rg          japaneast 172.16.0.0/24
sample-vnet10  sample-rg          japaneast 10.0.0.0/24


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  NSG
| - - - - - - - - - - - - - -

NSG_names         NSG_resourceGroups            subnetNames                   vNet_name
---------         ------------------            -----------                   ---------
nsg01;nsg02       sample-rg;sample-rg           192-168-0-0;192-168-0-128     sample-vnet192
nsg03             sample-rg                     192-168-255-0                 sample-vnet192
nsg01             sample-rg                     172-16-0-0                    sample-vnet172
nsg01;nsg02;nsg03 sample-rg;sample-rg;sample-rg 10-0-0-0;10-0-0-64;10-0-0-128 sample-vnet10


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  NsgRule
| - - - - - - - - - - - - - -
.\csv\nsg_parameter.csv

nsgName nsgResourceGroup ruleName                access protocol direction priority sourceAddresses                          sourcePorts de
                                                                                                                                         st
                                                                                                                                         Ad
                                                                                                                                         dr
                                                                                                                                         es
                                                                                                                                         se
                                                                                                                                         s
------- ---------------- --------                ------ -------- --------- -------- ---------------                          ----------- --
nsg01   sample-rg        AllowALL.subnet-in      Allow  *        inbound   1000     192.168.0.0/24;172.16.0.0/24;10.0.0.0/24 *           Vi
nsg01   sample-rg        AllowALL.ALB-in         Allow  *        inbound   2000     AzureLoadBalancer                        *           *
nsg01   sample-rg        DenyALL-in              Deny   *        inbound   4096     *                                        *           *
nsg01   sample-rg        AllowALL.subnet-out     Allow  *        outbound  1000     192.168.0.0/24;172.16.0.0/24;10.0.0.0/24 *           Vi
nsg01   sample-rg        DenyALL-out             Deny   *        outbound  4096     *                                        *           *
nsg02   sample-rg        Allow53.google-out      Allow  UDP      outbound  1000     VirtualNetwork                           *           8.
nsg02   sample-rg        DenyALL.Internet-out    Deny   *        outbound  4000     VirtualNetwork                           *           In
nsg03   sample-rg        Allow80_443.internet-in Allow  TCP      inbound   1000     Internet                                 *           10
nsg03   sample-rg        AllowALL.ALB-in         Allow  *        inbound   2000     AzureLoadBalancer                        *           *
nsg03   sample-rg        DenyALL-in              Deny   *        inbound   4096     *                                        *           *
nsg03   sample-rg        AllowALL.subnet-out     Allow  *        outbound  1000     192.168.0.0/24;172.16.0.0/24;10.0.0.0/24 *           10
nsg03   sample-rg        DenyALL-out             Deny   *        outbound  4096     *                                        *           *


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  Subnet
| - - - - - - - - - - - - - -

vNet_name      subnetNames                   subnetRanges                           NSG_names
---------      -----------                   ------------                           ---------
sample-vnet192 192-168-0-0;192-168-0-128     192.168.0.0/25;192.168.0.128/25        nsg01;nsg02
sample-vnet192 192-168-255-0                 192.168.255.0/24                       nsg03
sample-vnet172 172-16-0-0                    172.16.0.0/24                          nsg01
sample-vnet10  10-0-0-0;10-0-0-64;10-0-0-128 10.0.0.0/26;10.0.0.64/26;10.0.0.128/26 nsg01;nsg02;nsg03


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  VM_NIC
| - - - - - - - - - - - - - -
.\csv\nw_parameter.csv

vm_name     ipAddress    vNet_name      subnetNames
-------     ---------    ---------      -----------
sample-vm01 192.168.0.11 sample-vnet192 192-168-0-0;192-168-0-128
sample-vm01 192.168.0.11 sample-vnet192 192-168-255-0
sample-vm02 172.16.0.12  sample-vnet172 172-16-0-0
sample-vm03 10.0.0.13    sample-vnet10  10-0-0-0;10-0-0-64;10-0-0-128


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  AvailabilitySet
| - - - - - - - - - - - - - -
.\csv\availability_parameter.csv

AvailabilitySet vm_resourceGroup Location  UpdateDomain FaultDomain ProximityPlacementGroup
--------------- ---------------- --------  ------------ ----------- -----------------------
sample-as01     sample-rg        japaneast 5            2           sample-ppg01
sample-as02     sample-rg        japaneast 5            2


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  VM
| - - - - - - - - - - - - - -
.\csv\vm_parameter.csv

vm_name     vm_resourceGroup vm_size         vmOsDisk_size ImageName
-------     ---------------- -------         ------------- ---------
sample-vm01 sample-rg        Standard_F2s_v2 128
sample-vm02 sample-rg        Standard_B1s    32
sample-vm03 sample-rg        Standard_F2s_v2 64            win2019-image


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  StorageAccount
| - - - - - - - - - - - - - -
.\csv\storage_parameter.csv

storageName     storageResourceGroup bootdiag_vmNames        flowlog_nsgs
-----------     -------------------- ----------------        ------------
sample001vmboot sample-rg            sample-vm01;sample-vm02
sample001nsglog sample-rg                                    nsg01;nsg02;nsg03


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
|  RecoveryServicesVault
| - - - - - - - - - - - - - -
.\csv\backup_parameter.csv

vmName      vmRg      RecoveryServicesName RecoveryServicesRg
------      ----      -------------------- ------------------
sample-vm01 sample-rg rsc01                sample-rg
sample-vm02 sample-rg rsc02                sample-rg


|
情報: Loaded Module 'Az.MSGraph'
情報: Loaded Module 'Az.Accounts'
情報: Loaded Module 'Az.Authorization'
|
| RSC ResourceID:
| /subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/sample-rg/providers/Microsoft.RecoveryServices/vaults/rsc01
|
|
| RSC ResourceID:
| /subscriptions/b0da899c-406c-4ebc-b7d5-0f9286d42d1e/resourceGroups/sample-rg/providers/Microsoft.RecoveryServices/vaults/rsc02
|
| function add_AzRecoveryServicesVault complete.
|
|
|
| - - - - - - - - - - - - - -
|  VM_Backup
| - - - - - - - - - - - - - -
.\csv\backup_parameter.csv

RecoveryServicesName policyName   scheduleRunFrequency Redundancy
-------------------- ----------   -------------------- ----------
rsc01                WeeklyPolicy Weekly               locallyredundant
rsc02                DailyPolicy  Daily                locallyredundant


|
| -- Error --  VM [ sample-vm01 ] not found.
| function add_BackupPolicy complete.
|
|
|
| - - - - - - - - - - - - - -
|  Tag
| - - - - - - - - - - - - - -
.\csv\tag_parameter.csv

ResourceName ResourceGroup TagName    TagValue
------------ ------------- -------    --------
sample-vm01  sample-rg     CostCenter 1
sample-vm02  sample-rg     CostCenter 2


|
| Canceled.
|
|
|
| - - - - - - - - - - - - - -
| deploy_AzVm.ps1 Complete.
| - - - - - - - - - - - - - -
|
**********************
Windows PowerShell トランスクリプト終了
終了時刻: 20230421164920
**********************
